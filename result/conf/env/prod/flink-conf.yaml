# state persistent directories are on hdfs
high-availability.storageDir: hdfs:///flink/repo_name/prod/storage
state.checkpoints.dir: hdfs:///flink/repo_name/prod/checkpoints
state.checkpoints.num-retained: 30

#akka default overrides
## Increased to prevent savepoints/with or without cancellation that work with larger state from timing out
## the default was 60 s[econds]
akka.client.timeout: 120 s

# Path to the Hadoop configuration directory.
fs.hdfs.hadoopconf: /usr/local/flink/conf

#==============================================================================
# Master High Availability (required configuration)
#==============================================================================

high-availability: zookeeper
high-availability.zookeeper.quorum: zk-1:2181,zk-2:2181,zk-3:2181
high-availability.zookeeper.path.root: /repo_name/prod
high-availability.cluster-id: /repo_name/k8s
high-availability.jobmanager.port: 6123

taskmanager.memory.off-heap: false
taskmanager.memory.preallocate: true
taskmanager.debug.memory.startLogThread: true
taskmanager.debug.memory.logIntervalMs: 100000
taskmanager.data.port: 44707

#jmx
metrics.internal.query-service.port: 6666
metrics.reporters: jmx_reporter
metrics.reporter.jmx_reporter.class: org.apache.flink.metrics.jmx.JMXReporter
env.java.opts: -Dcom.sun.management.jmxremote.port=4999 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false

#prometheus
metrics.reporters: prom
metrics.reporter.prom.class: org.apache.flink.metrics.prometheus.PrometheusReporter
metrics.reporter.prom.port: 9610

#web
jobstore.expiration-time: 86400
web.timeout: 120000
akka.jvm-exit-on-fatal-error: true
akka.ask.timeout: 30s

#Everything after this line is generated by entrypoint.sh
